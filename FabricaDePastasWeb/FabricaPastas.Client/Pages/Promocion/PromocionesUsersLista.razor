@page "/api/Promocion/ListaUsuarios"
@inject IHTTPServicio http;
@inject NavigationManager navigationManager;


<div class="bg-warning text-white text-center py-4 rounded shadow">
    <h1 class="display-5 fw-bold mb-0">🎉 ¡Ofertas que no podés dejar pasar!</h1>
</div>

<section class="promo-banner text-center text-white py-5 px-3">
    <div class="container">
        <h2 class="display-4 fw-bold mb-3 animate__animated animate__fadeInDown">
            ¡Consultanos, <span class="text-warning">todas las promos</span> que tenemos para vos!
        </h2>
        <p class="lead mb-4 animate__animated animate__fadeInUp">
            Descuentos exclusivos, beneficios únicos y sorpresas que no te podés perder.
        </p>
        <a href="/" class="btn btn-warning btn-lg shadow animate__animated animate__pulse animate__infinite">
            Ir a inicio
        </a>
        @*  <a href="#" class="btn btn-warning btn-lg shadow animate__animated animate__pulse animate__infinite">
            Ver Promociones
        </a> *@
    </div>
</section>

<!-- Estilos personalizados -->
<style>
    .promo-banner {
        background: linear-gradient(135deg, #ff6f61, #ffcc70);
        background-size: cover;
        border-radius: 0 0 20px 20px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    }
</style>

<!-- Animaciones (requiere Animate.css) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<div class="container">
    @if (Mensaje == null)
    {
        @if (ListaPromo == null)
        {
            <div class="alert alert-secondary text-center">🔄 Buscando promociones...</div>
        }
        else if (ListaPromo.Count == 0)
        {
            <div class="alert alert-warning text-center">⚠️ No existen promociones activas</div>
        }
        else
        {
            <div class="table-responsive">
                <table class="table table-bordered table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>Título</th>
                            <th>Descripción</th>
                            <th>Fecha inicio</th>
                            <th>Fecha fin</th>
                          @*   <th>Activa</th> *@
                        
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in ListaPromo)
                        {
                            <tr>
                                <td>@item.Titulo</td>
                                <td>@item.Descripcion</td>
                                <td>@item.Fecha_Inicio.ToShortDateString()</td>
                                <td>@item.Fecha_Fin.ToShortDateString()</td>
                             

                            </tr>
                        }
                    </tbody>
                </table>
            </div>

        }
    }
    else
    {
        <div class="alert alert-danger text-center">❌ Error: @Mensaje</div>
    }
</div>





@code {

    Promocion promocion;

    Promocion? promocionBorrar = null;


    List<Promocion> ListaPromo;

    string Mensaje;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        await Leer();
    }

    private async Task Leer()
    {
        var resp = await http.Get<List<Promocion>>("api/Promocion");

        string Mensaje = "";

        if (!resp.Error)
        {
            ListaPromo = resp.Respuesta;
        }
        else
        {
            Mensaje = await resp.ObtenerError();
        }
    }

}