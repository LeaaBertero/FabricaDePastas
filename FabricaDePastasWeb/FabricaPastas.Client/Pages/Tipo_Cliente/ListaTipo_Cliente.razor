@page "/api/Tipo_Cliente"
@inject IHTTPServicio http;
@inject HttpClient Http;
@inject NavigationManager navigationManager;

@* <!DOCTYPE html>
<html>

<head>
    <title>Lista Roles</title>
    <meta charset="utf-8" />
</head>


<body>

    <header>
        <h1>Seleccione el tipo de cliente</h1>
    </header>

    <main>

        <table>

            <tr>
                <th>Descripción</th>
            </tr>

            @if (Mensaje == null)
            {
                if (ListaTipo_Clientes == null)
                {
                    <p>Buscando....</p>
                }
                else if (ListaTipo_Clientes.Count == 0)
                {
                    <p>No existen tipos de cliente</p>
                }
                else
                {
                    @foreach (var item in ListaTipo_Clientes)
                    {
                        <tr>
                            <td>@item.Descripcion</td>
                        </tr>

                    }
                }
            }
            else
            {
                <p> Error: @Mensaje</p>
            }

          


        </table>

    </main>

    <footer>
        <p>&copy; 2025 La Nonna Personal</p>
    </footer>

</body>

</html> *@

<!DOCTYPE html>
<html>
<head>
    <title>Seleccionar Tipo de Cliente</title>
    <meta charset="utf-8" />
</head>
<body>
    <header>
        <h1>Seleccione el tipo de cliente</h1>
    </header>

    <main>
        @if (Mensaje == null)
        {
            if (ListaTipo_Clientes == null)
            {
                <p>Buscando...</p>
            }
            else if (ListaTipo_Clientes.Count == 0)
            {
                <p>No existen tipos de cliente</p>
            }
            else
            {
                <form method="post" asp-action="Ingresar">
                    <label for="tipoCliente">Tipo de cliente:</label>
                    <select id="tipoCliente" name="tipoCliente" required>
                        @foreach (var item in ListaTipo_Clientes)
                        {
                            <option value="@item.Id">@item.Descripcion</option>
                        }
                    </select>

                    <button type="submit">Ingresar</button>
                </form>
            }
        }
        else
        {
            <p>Error: @Mensaje</p>
        }
    </main>

    <footer>
        <p>&copy; 2025 La Nonna Personal</p>
    </footer>
</body>
</html>

@code {
    private List<Tipo_Cliente> ListaTipo_Clientes;

    string Mensaje;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            ListaTipo_Clientes = await Http.GetFromJsonAsync<List<Tipo_Cliente>>("api/Tipo_Cliente");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error obteniendo tipos de cliente: {ex.Message}");
        }
    }





}
