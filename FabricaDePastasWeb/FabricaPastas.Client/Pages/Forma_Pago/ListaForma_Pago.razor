@page "/api/Forma_Pago/Lista"
@inject IHTTPServicio http;
@inject HttpClient Http;
@inject NavigationManager navigationManager;





@* <h1 class="text-center">-- Seleccione la forma de pago -- </h1>


<select @bind="FormaPagoSeleccionado" class="form-select">
    <option disabled selected value="">-- Seleccione la forma de pago --</option>
    @if (ListaFormaPago != null)
    {
        foreach (var FormaPago in ListaFormaPago)
        {
            <option value="@FormaPago.Metodo">@FormaPago.Metodo</option>
        }
    }
    @if (!string.IsNullOrEmpty(FormaPagoSeleccionado))
    {
        <p>Rol seleccionado: <strong>@FormaPagoSeleccionado</strong></p>
    }
</select> *@

<h1 class="text-center mb-4">💳 Seleccione la forma de pago</h1>

<p class="bg-warning text-center fs-4">Cargar Tipo de pago</p>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <label for="FormaPagoSeleccionado" class="form-label">Opciones disponibles</label>
            <select id="FormaPagoSeleccionado" @bind="FormaPagoSeleccionado" class="form-select">
                <option disabled selected value="">-- Seleccione una forma de pago --</option>
                @if (ListaFormaPago != null)
                {
                    foreach (var FormaPago in ListaFormaPago)
                    {
                        <option value="@FormaPago.Metodo">@FormaPago.Metodo</option>
                    }
                }
            </select>

            

            @if (!string.IsNullOrEmpty(FormaPagoSeleccionado))
            {
                <div class="alert alert-info mt-3 text-center">
                    Forma de pago seleccionada: <strong>@FormaPagoSeleccionado</strong>
                </div>
            }

            <div>
               
                <button class="btn btn-primary" @onclick="NuevaFomaDePago">Cargar</button>
            </div>


          

           @*  <div class="text-center mt-4">
                <button class="btn btn-success me-2" @onclick="ConfirmarPago">✅ Confirmar</button>
                <button class="btn btn-outline-secondary" type="button" @onclick="Cancelar">Cancelar</button>
            </div> *@
        </div>
    </div>
</div>

@* <button class="btn btn-primary" @onclick="IngresarFormaPago">Ingresar</button> *@



@if (Mensaje == null)
{
    if (ListaFormaPago == null)
    {
        <p>Buscando....</p>
    }
    else if (ListaFormaPago.Count == 0)
    {
        <p>No existen roles de usuarios cargados</p>
    }
    
}
else
{
    <p> Error: @Mensaje</p>
}





@code {

    private void IngresarFormaPago()
    {
        if (!string.IsNullOrEmpty(FormaPagoSeleccionado))
        {
            navigationManager.NavigateTo($"/Forma_Pago/Lista");
        }
    }
    //selecciona el rol de usuario
    private string FormaPagoSeleccionado;



    private List<Forma_Pago> ListaFormaPago;

    string Mensaje;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            ListaFormaPago = await Http.GetFromJsonAsync<List<Forma_Pago>>("/api/Forma_Pago");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error obteniendo Formas de pago: {ex.Message}");
        }
    }


    private void NuevaFomaDePago()
    {
        navigationManager.NavigateTo("/api/Forma_Pago/Crear");
    }
}















