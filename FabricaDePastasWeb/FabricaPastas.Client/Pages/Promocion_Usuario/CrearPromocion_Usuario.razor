@page "/api/Promocion_Usuario/Crear"
@inject IHTTPServicio http;
@inject NavigationManager navigationManager;


#<!-- #region name -->

<h1 class="text-center mb-4">Promoción de los productos</h1>



<EditForm Model="promocion_usuario" OnValidSubmit="Grabar" class="container">
    <DataAnnotationsValidator />

    <div class="row g-3">
        <div class="col-md-6">
            <label for="fechaInicio" class="form-label">Fecha de inicio</label>
            <input type="date" id="fechaInicio" placeholder="Fecha de inicio"
                   @bind="promocion_usuario.Fecha_Inicio_Promo" class="form-control" />
            <ValidationMessage For="@(() => promocion_usuario.Fecha_Inicio_Promo)" />
        </div>

        <div class="col-md-6">
            <label for="fechaFin" class="form-label">Fecha fin de promoción</label>
            <input type="date" id="fechaFin" placeholder="Fecha fin"
                   @bind="promocion_usuario.Fecha_Fin_Promo" class="form-control" />
            <ValidationMessage For="@(() => promocion_usuario.Fecha_Fin_Promo)" />
        </div>

        <div class="col-md-6">
            <label for="fechaFin" class="form-label">Descripción de promo</label>
            <input type="text" id="Descripcion" placeholder="Descripción de la promoción"
                   @bind="promocion_usuario.Descripcion" class="form-control" />
            <ValidationMessage For="@(() => promocion_usuario.Descripcion)" />
        </div>

        <div class="col-12 text-center mt-4">
            <button class="btn btn-success me-2" type="submit">🎯 Cargar promoción</button>
            <button class="btn btn-outline-secondary" type="button" @onclick="Cancelar">Cancelar</button>
        </div>
    </div>
</EditForm>

<!-- #endregion -->



@code {
    private Promocion_Usuario promocion_usuario = new Promocion_Usuario();

    private async Task Grabar()
    {
        var httpRespuesta = await http.Post<Promocion_Usuario>("api/Promocion_Usuario", promocion_usuario);

        if (httpRespuesta.Error)
        {
            var body = httpRespuesta.HttpResponseMessage;
        }

        navigationManager.NavigateTo("/api/Promocion_Usuario/Lista");

    }

    private void Cancelar()
    {
        navigationManager.NavigateTo("/api/Promocion_Usuario/Lista");
    }
}
